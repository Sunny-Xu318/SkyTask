{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed, onBeforeUnmount, onMounted, reactive, ref, watch } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { Search, Plus, Download } from '@element-plus/icons-vue';\nimport { ElMessage } from 'element-plus';\nimport StatusTag from '@/components/common/StatusTag.vue';\nimport TaskFormDrawer from '@/components/task/TaskFormDrawer.vue';\nimport TaskExecutionDrawer from '@/components/task/TaskExecutionDrawer.vue';\nexport default {\n  __name: 'TaskCenterView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    /* eslint-disable no-unused-vars */\n    const store = useStore();\n    const route = useRoute();\n    const router = useRouter();\n    const canReadTasks = computed(() => store.getters['auth/hasPermission']('task:read'));\n    const canManageTasks = computed(() => store.getters['auth/hasPermission']('task:write'));\n    const canTriggerTasks = computed(() => store.getters['auth/hasPermission']('task:trigger'));\n    const drawerVisible = ref(false);\n    const executionVisible = ref(false);\n    const submitting = ref(false);\n    const currentTaskForm = ref({});\n    const currentTask = ref(null);\n    let refreshTimer = null;\n    let stopPermissionWatcher = null;\n    const filters = reactive({\n      keyword: '',\n      status: 'ALL',\n      owner: null,\n      tags: []\n    });\n    const ownerOptions = [{\n      label: 'Zhang Qiang - Data Platform',\n      value: 'zhangqiang'\n    }, {\n      label: 'Li Na - Marketing',\n      value: 'lina'\n    }, {\n      label: 'Wang Wei - Settlement',\n      value: 'wangwei'\n    }, {\n      label: 'Zhou Kai - Recommendation',\n      value: 'zhoukai'\n    }];\n    const tagOptions = ['Report', 'Risk', 'Cache', 'Recommend', 'Marketing', 'Settlement'];\n    const groupOptions = [{\n      label: 'Data Report',\n      value: 'DATA_REPORT'\n    }, {\n      label: 'Realtime Risk',\n      value: 'RISK_CONTROL'\n    }, {\n      label: 'Marketing Center',\n      value: 'MARKETING'\n    }, {\n      label: 'Recommendation',\n      value: 'RECOMMEND'\n    }];\n    const buildErrorState = error => {\n      if (!error) {\n        return null;\n      }\n      if (error.message && typeof error.forbidden === 'boolean') {\n        return {\n          forbidden: error.forbidden,\n          message: error.message\n        };\n      }\n      const status = Number(error?.response?.status);\n      const forbidden = status === 403;\n      const message = error?.response?.data?.message || error?.message || (forbidden ? 'You do not have permission to perform this action' : 'Request failed, please retry');\n      return {\n        forbidden,\n        message\n      };\n    };\n    const taskList = computed(() => store.getters['tasks/taskList']);\n    const pagination = computed(() => store.getters['tasks/taskPagination']);\n    const executions = computed(() => store.getters['tasks/taskExecutions']);\n    const executionPagination = computed(() => store.getters['tasks/taskExecutionPagination']);\n    const loading = computed(() => store.getters['tasks/tasksLoading']);\n    const executionsLoading = computed(() => store.getters['tasks/taskExecutionLoading']);\n    const listError = computed(() => store.getters['tasks/taskListError']);\n    const metricsError = computed(() => store.getters['tasks/taskMetricsError']);\n    const listErrorState = computed(() => buildErrorState(listError.value));\n    const metricsErrorState = computed(() => buildErrorState(metricsError.value));\n    const ensureReadPermission = (toast = true) => {\n      if (canReadTasks.value) {\n        return true;\n      }\n      if (toast) {\n        ElMessage.warning('您没有权限查看任务');\n      }\n      return false;\n    };\n    const ensureManagePermission = () => {\n      if (canManageTasks.value) {\n        return true;\n      }\n      ElMessage.warning('您没有权限管理任务');\n      return false;\n    };\n    const ensureTriggerPermission = () => {\n      if (canTriggerTasks.value) {\n        return true;\n      }\n      ElMessage.warning('您没有权限触发任务');\n      return false;\n    };\n    const requestTaskData = async () => {\n      if (!ensureReadPermission(false)) {\n        return;\n      }\n      try {\n        await store.dispatch('tasks/loadTaskList');\n      } catch (error) {\n        // errors handled via store state\n      }\n      try {\n        await store.dispatch('tasks/loadMetrics');\n      } catch (error) {\n        // errors handled via store state\n      }\n    };\n    const startAutoRefresh = () => {\n      if (refreshTimer) {\n        return;\n      }\n      refreshTimer = window.setInterval(requestTaskData, 10000);\n    };\n    const stopAutoRefresh = () => {\n      if (refreshTimer) {\n        window.clearInterval(refreshTimer);\n        refreshTimer = null;\n      }\n    };\n    const applyQueryFilters = () => {\n      if (typeof route.query.keyword === 'string') {\n        filters.keyword = route.query.keyword;\n      }\n      if (typeof route.query.status === 'string') {\n        filters.status = route.query.status;\n      }\n      if (typeof route.query.owner === 'string') {\n        filters.owner = route.query.owner;\n      }\n      if (route.query.tags) {\n        if (Array.isArray(route.query.tags)) {\n          filters.tags = route.query.tags;\n        } else if (typeof route.query.tags === 'string') {\n          filters.tags = route.query.tags.split(',');\n        }\n      }\n    };\n    onMounted(() => {\n      applyQueryFilters();\n      stopPermissionWatcher = watch(canReadTasks, allowed => {\n        if (!allowed) {\n          stopAutoRefresh();\n          return;\n        }\n        handleSearch();\n        startAutoRefresh();\n      }, {\n        immediate: true\n      });\n    });\n    onBeforeUnmount(() => {\n      if (stopPermissionWatcher) {\n        stopPermissionWatcher();\n      }\n      stopAutoRefresh();\n    });\n    const handleSearch = async () => {\n      if (!ensureReadPermission()) {\n        return;\n      }\n      await store.dispatch('tasks/setFilters', {\n        ...filters\n      });\n      try {\n        await store.dispatch('tasks/loadMetrics');\n      } catch (error) {\n        // errors handled via store state\n      }\n      const query = {\n        keyword: filters.keyword || undefined,\n        status: filters.status && filters.status !== 'ALL' ? filters.status : undefined,\n        owner: filters.owner || undefined,\n        tags: filters.tags.length ? filters.tags.join(',') : undefined\n      };\n      router.replace({\n        query: {\n          ...route.query,\n          ...query\n        }\n      });\n    };\n    const changePage = async page => {\n      if (!ensureReadPermission(false)) {\n        return;\n      }\n      await store.dispatch('tasks/setPagination', {\n        page\n      });\n    };\n    const changeSize = async size => {\n      if (!ensureReadPermission(false)) {\n        return;\n      }\n      await store.dispatch('tasks/setPagination', {\n        size,\n        page: 1\n      });\n    };\n    const handleDrawerVisible = visible => {\n      drawerVisible.value = visible;\n      if (!visible) {\n        currentTaskForm.value = {};\n      }\n    };\n    const openCreate = () => {\n      if (!ensureManagePermission()) {\n        return;\n      }\n      currentTaskForm.value = {};\n      drawerVisible.value = true;\n    };\n    const editTask = row => {\n      if (!ensureManagePermission()) {\n        return;\n      }\n      currentTaskForm.value = {\n        ...row\n      };\n      drawerVisible.value = true;\n    };\n    const submitTask = async payload => {\n      if (!ensureManagePermission()) {\n        return;\n      }\n      submitting.value = true;\n      try {\n        await store.dispatch('tasks/submitTask', payload);\n        drawerVisible.value = false;\n        currentTaskForm.value = {};\n        handleSearch();\n      } finally {\n        submitting.value = false;\n      }\n    };\n    const toggleTask = async row => {\n      if (!ensureManagePermission()) {\n        return;\n      }\n      await store.dispatch('tasks/changeTaskStatus', {\n        taskId: row.id,\n        enabled: !row.enabled\n      });\n      handleSearch();\n    };\n    const removeTask = async row => {\n      if (!ensureManagePermission()) {\n        return;\n      }\n      await store.dispatch('tasks/removeTask', row.id);\n      handleSearch();\n    };\n    const triggerTask = async row => {\n      if (!ensureTriggerPermission()) {\n        return;\n      }\n      await store.dispatch('tasks/triggerTask', {\n        taskId: row.id,\n        payload: {}\n      });\n      ElMessage.success('任务执行已请求');\n    };\n    const openExecution = async row => {\n      if (!ensureReadPermission()) {\n        return;\n      }\n      await store.dispatch('tasks/loadTaskExecutions', {\n        taskId: row.id\n      });\n      currentTask.value = row;\n      executionVisible.value = true;\n    };\n    const handleExecutionPage = async page => {\n      if (!ensureReadPermission(false) || !currentTask.value) {\n        return;\n      }\n      await store.dispatch('tasks/loadTaskExecutions', {\n        taskId: currentTask.value.id,\n        page,\n        size: executionPagination.value.size\n      });\n    };\n    const openDetail = row => {\n      if (!ensureReadPermission()) {\n        return;\n      }\n      router.push(`/tasks/${row.id}`);\n    };\n    const viewLog = record => {\n      if (!ensureReadPermission()) {\n        return;\n      }\n      router.push({\n        path: `/tasks/${currentTask.value?.id}`,\n        query: {\n          recordId: record.id\n        }\n      });\n    };\n    const openCronHelper = () => {\n      router.push({\n        path: '/config',\n        query: {\n          tab: 'cron-tool'\n        }\n      });\n    };\n    const exportTasks = () => {\n      if (!ensureReadPermission()) {\n        return;\n      }\n      window.open('/api/tasks/export');\n    };\n    const formatType = type => {\n      const map = {\n        CRON: 'Cron定时',\n        ONE_TIME: '一次性',\n        FIXED_RATE: '固定频率'\n      };\n      return map[type] || type;\n    };\n    const getOwnerInitials = owner => {\n      if (!owner) {\n        return 'NA';\n      }\n      return owner.slice(0, 2).toUpperCase();\n    };\n    const __returned__ = {\n      store,\n      route,\n      router,\n      canReadTasks,\n      canManageTasks,\n      canTriggerTasks,\n      drawerVisible,\n      executionVisible,\n      submitting,\n      currentTaskForm,\n      currentTask,\n      get refreshTimer() {\n        return refreshTimer;\n      },\n      set refreshTimer(v) {\n        refreshTimer = v;\n      },\n      get stopPermissionWatcher() {\n        return stopPermissionWatcher;\n      },\n      set stopPermissionWatcher(v) {\n        stopPermissionWatcher = v;\n      },\n      filters,\n      ownerOptions,\n      tagOptions,\n      groupOptions,\n      buildErrorState,\n      taskList,\n      pagination,\n      executions,\n      executionPagination,\n      loading,\n      executionsLoading,\n      listError,\n      metricsError,\n      listErrorState,\n      metricsErrorState,\n      ensureReadPermission,\n      ensureManagePermission,\n      ensureTriggerPermission,\n      requestTaskData,\n      startAutoRefresh,\n      stopAutoRefresh,\n      applyQueryFilters,\n      handleSearch,\n      changePage,\n      changeSize,\n      handleDrawerVisible,\n      openCreate,\n      editTask,\n      submitTask,\n      toggleTask,\n      removeTask,\n      triggerTask,\n      openExecution,\n      handleExecutionPage,\n      openDetail,\n      viewLog,\n      openCronHelper,\n      exportTasks,\n      formatType,\n      getOwnerInitials,\n      computed,\n      onBeforeUnmount,\n      onMounted,\n      reactive,\n      ref,\n      watch,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get Search() {\n        return Search;\n      },\n      get Plus() {\n        return Plus;\n      },\n      get Download() {\n        return Download;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      StatusTag,\n      TaskFormDrawer,\n      TaskExecutionDrawer\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","onBeforeUnmount","onMounted","reactive","ref","watch","useRoute","useRouter","useStore","Search","Plus","Download","ElMessage","StatusTag","TaskFormDrawer","TaskExecutionDrawer","store","route","router","canReadTasks","getters","canManageTasks","canTriggerTasks","drawerVisible","executionVisible","submitting","currentTaskForm","currentTask","refreshTimer","stopPermissionWatcher","filters","keyword","status","owner","tags","ownerOptions","label","value","tagOptions","groupOptions","buildErrorState","error","message","forbidden","Number","response","data","taskList","pagination","executions","executionPagination","loading","executionsLoading","listError","metricsError","listErrorState","metricsErrorState","ensureReadPermission","toast","warning","ensureManagePermission","ensureTriggerPermission","requestTaskData","dispatch","startAutoRefresh","window","setInterval","stopAutoRefresh","clearInterval","applyQueryFilters","query","Array","isArray","split","allowed","handleSearch","immediate","undefined","length","join","replace","changePage","page","changeSize","size","handleDrawerVisible","visible","openCreate","editTask","row","submitTask","payload","toggleTask","taskId","id","enabled","removeTask","triggerTask","success","openExecution","handleExecutionPage","openDetail","push","viewLog","record","path","recordId","openCronHelper","tab","exportTasks","open","formatType","type","map","CRON","ONE_TIME","FIXED_RATE","getOwnerInitials","slice","toUpperCase"],"sources":["D:/桌面/项目/分布式任务调度系统/SkyTask-main/SkyTask-main/skytask-frontend/src/views/TaskCenterView.vue"],"sourcesContent":["<template>\n  <div class=\"task-center\">\n    <section class=\"task-center__toolbar card\">\n      <div class=\"toolbar__left\">\n        <el-form :inline=\"true\" :model=\"filters\">\n          <el-form-item>\n            <el-input\n              v-model=\"filters.keyword\"\n              placeholder=\"搜索任务名称 / 负责人 / 标签\"\n              clearable\n              @keyup.enter=\"handleSearch\"\n            >\n              <template #prefix>\n                <el-icon><Search /></el-icon>\n              </template>\n            </el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-select\n              v-model=\"filters.status\"\n              placeholder=\"任务状态\"\n              clearable\n              @change=\"handleSearch\"\n            >\n              <el-option label=\"全部\" value=\"ALL\" />\n              <el-option label=\"已启用\" value=\"ENABLED\" />\n              <el-option label=\"已禁用\" value=\"DISABLED\" />\n              <el-option label=\"失败告警\" value=\"FAILED\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-select\n              v-model=\"filters.owner\"\n              placeholder=\"负责人\"\n              clearable\n              filterable\n              @change=\"handleSearch\"\n            >\n              <el-option\n                v-for=\"owner in ownerOptions\"\n                :key=\"owner.value\"\n                :label=\"owner.label\"\n                :value=\"owner.value\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-select\n              v-model=\"filters.tags\"\n              multiple\n              collapse-tags\n              placeholder=\"标签\"\n              @change=\"handleSearch\"\n            >\n              <el-option\n                v-for=\"tag in tagOptions\"\n                :key=\"tag\"\n                :label=\"tag\"\n                :value=\"tag\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div class=\"toolbar__right\">\n        <el-button v-if=\"canReadTasks\" :icon=\"Download\" @click=\"exportTasks\">导出</el-button>\n        <el-button\n          v-if=\"canManageTasks\"\n          type=\"primary\"\n          :icon=\"Plus\"\n          @click=\"openCreate\"\n        >\n          新建任务\n        </el-button>\n      </div>\n    </section>\n    <el-alert\n      v-if=\"metricsErrorState\"\n      class=\"task-center__alert\"\n      :type=\"metricsErrorState.forbidden ? 'warning' : 'error'\"\n      :title=\"metricsErrorState.forbidden ? '无权查看任务统计' : '任务指标加载失败'\"\n      :description=\"metricsErrorState.message\"\n      show-icon\n      :closable=\"false\"\n    />\n\n    <section v-if=\"canReadTasks\" class=\"task-center__content card\">\n      <div v-if=\"listErrorState\" class=\"task-center__error\">\n        <el-result\n          :status=\"listErrorState.forbidden ? 'warning' : 'error'\"\n          :title=\"listErrorState.forbidden ? '无访问权限' : '任务列表加载失败'\"\n          :sub-title=\"listErrorState.message\"\n        >\n          <template #extra>\n            <el-button type=\"primary\" size=\"small\" @click=\"requestTaskData\">重试</el-button>\n          </template>\n        </el-result>\n      </div>\n      <el-table v-else :data=\"taskList\" height=\"500\" v-loading=\"loading\">\n        <el-table-column label=\"任务\" min-width=\"220\">\n          <template #default=\"{ row }\">\n            <div class=\"task-name\">\n              <el-link type=\"primary\" @click=\"openDetail(row)\">{{ row.name }}</el-link>\n              <el-tag v-if=\"row.group\" size=\"small\" class=\"task-name__tag\">{{ row.group }}</el-tag>\n            </div>\n            <div class=\"task-meta\">\n              <span>最后运行: {{ row.lastTrigger || '-' }}</span>\n              <span>最后节点: {{ row.lastNode || '-' }}</span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"类型\" width=\"120\">\n          <template #default=\"{ row }\">\n            <el-tag>{{ formatType(row.type) }}</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"cronExpr\" label=\"调度配置\" width=\"160\" show-overflow-tooltip />\n        <el-table-column label=\"负责人\" width=\"140\">\n          <template #default=\"{ row }\">\n            <el-avatar size=\"small\" class=\"owner-avatar\">{{ getOwnerInitials(row.owner) }}</el-avatar>\n            <span>{{ row.owner }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"状态\" width=\"140\">\n          <template #default=\"{ row }\">\n            <StatusTag :status=\"row.status\" />\n          </template>\n        </el-table-column>\n        <el-table-column label=\"告警\" width=\"120\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"row.alertEnabled ? 'success' : 'info'\" size=\"small\">\n              {{ row.alertEnabled ? '已启用' : '已禁用' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"320\" fixed=\"right\">\n          <template #default=\"{ row }\">\n            <el-button\n              v-if=\"canReadTasks\"\n              link\n              type=\"primary\"\n              size=\"small\"\n              @click=\"openExecution(row)\"\n            >\n              记录\n            </el-button>\n            <el-button\n              v-if=\"canManageTasks\"\n              link\n              type=\"primary\"\n              size=\"small\"\n              @click=\"editTask(row)\"\n            >\n              编辑\n            </el-button>\n            <el-button\n              v-if=\"canManageTasks\"\n              link\n              type=\"warning\"\n              size=\"small\"\n              @click=\"toggleTask(row)\"\n            >\n              {{ row.status === 'ENABLED' ? '禁用' : '启用' }}\n            </el-button>\n            <el-popconfirm\n              v-if=\"canManageTasks\"\n              title=\"确定删除此任务吗？\"\n              @confirm=\"removeTask(row)\"\n            >\n              <template #reference>\n                <el-button link type=\"danger\" size=\"small\">删除</el-button>\n              </template>\n            </el-popconfirm>\n            <el-button\n              v-if=\"canTriggerTasks\"\n              link\n              type=\"success\"\n              size=\"small\"\n              @click=\"triggerTask(row)\"\n            >\n              触发\n            </el-button>\n          </template>\n        </el-table-column>\n        <template #empty>\n          <el-empty description=\"暂无任务\" />\n        </template>\n      </el-table>\n    </section>\n\n    <section v-else class=\"card task-center__empty\">\n      <el-empty description=\"您没有权限查看任务\" />\n    </section>\n    <div v-if=\"canReadTasks\" class=\"task-center__pagination\">\n      <el-pagination\n        background\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"pagination.total\"\n        :current-page=\"pagination.page\"\n        :page-size=\"pagination.size\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        @current-change=\"changePage\"\n        @size-change=\"changeSize\"\n      />\n    </div>\n    <TaskFormDrawer\n      v-model:visible=\"drawerVisible\"\n      :model-value=\"currentTaskForm\"\n      :group-options=\"groupOptions\"\n      :owner-options=\"ownerOptions\"\n      :tag-options=\"tagOptions\"\n      :submitting=\"submitting\"\n      @submit=\"submitTask\"\n      @update:visible=\"handleDrawerVisible\"\n      @cron-helper=\"openCronHelper\"\n    />\n\n    <TaskExecutionDrawer\n      v-model:visible=\"executionVisible\"\n      :executions=\"executions\"\n      :pagination=\"executionPagination\"\n      :loading=\"executionsLoading\"\n      @page-change=\"handleExecutionPage\"\n      @view-log=\"viewLog\"\n    />\n  </div>\n</template>\n\n<script setup>\n/* eslint-disable no-unused-vars */\nimport { computed, onBeforeUnmount, onMounted, reactive, ref, watch } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { Search, Plus, Download } from '@element-plus/icons-vue';\nimport { ElMessage } from 'element-plus';\nimport StatusTag from '@/components/common/StatusTag.vue';\nimport TaskFormDrawer from '@/components/task/TaskFormDrawer.vue';\nimport TaskExecutionDrawer from '@/components/task/TaskExecutionDrawer.vue';\n\nconst store = useStore();\nconst route = useRoute();\nconst router = useRouter();\n\nconst canReadTasks = computed(() => store.getters['auth/hasPermission']('task:read'));\nconst canManageTasks = computed(() => store.getters['auth/hasPermission']('task:write'));\nconst canTriggerTasks = computed(() => store.getters['auth/hasPermission']('task:trigger'));\n\nconst drawerVisible = ref(false);\nconst executionVisible = ref(false);\nconst submitting = ref(false);\nconst currentTaskForm = ref({});\nconst currentTask = ref(null);\nlet refreshTimer = null;\nlet stopPermissionWatcher = null;\n\nconst filters = reactive({\n  keyword: '',\n  status: 'ALL',\n  owner: null,\n  tags: []\n});\n\nconst ownerOptions = [\n  { label: 'Zhang Qiang - Data Platform', value: 'zhangqiang' },\n  { label: 'Li Na - Marketing', value: 'lina' },\n  { label: 'Wang Wei - Settlement', value: 'wangwei' },\n  { label: 'Zhou Kai - Recommendation', value: 'zhoukai' }\n];\n\nconst tagOptions = ['Report', 'Risk', 'Cache', 'Recommend', 'Marketing', 'Settlement'];\n\nconst groupOptions = [\n  { label: 'Data Report', value: 'DATA_REPORT' },\n  { label: 'Realtime Risk', value: 'RISK_CONTROL' },\n  { label: 'Marketing Center', value: 'MARKETING' },\n  { label: 'Recommendation', value: 'RECOMMEND' }\n];\n\nconst buildErrorState = (error) => {\n  if (!error) {\n    return null;\n  }\n  if (error.message && typeof error.forbidden === 'boolean') {\n    return { forbidden: error.forbidden, message: error.message };\n  }\n  const status = Number(error?.response?.status);\n  const forbidden = status === 403;\n  const message =\n    error?.response?.data?.message ||\n    error?.message ||\n    (forbidden ? 'You do not have permission to perform this action' : 'Request failed, please retry');\n  return { forbidden, message };\n};\n\nconst taskList = computed(() => store.getters['tasks/taskList']);\nconst pagination = computed(() => store.getters['tasks/taskPagination']);\nconst executions = computed(() => store.getters['tasks/taskExecutions']);\nconst executionPagination = computed(() => store.getters['tasks/taskExecutionPagination']);\nconst loading = computed(() => store.getters['tasks/tasksLoading']);\nconst executionsLoading = computed(() => store.getters['tasks/taskExecutionLoading']);\nconst listError = computed(() => store.getters['tasks/taskListError']);\nconst metricsError = computed(() => store.getters['tasks/taskMetricsError']);\nconst listErrorState = computed(() => buildErrorState(listError.value));\nconst metricsErrorState = computed(() => buildErrorState(metricsError.value));\n\nconst ensureReadPermission = (toast = true) => {\n  if (canReadTasks.value) {\n    return true;\n  }\n  if (toast) {\n    ElMessage.warning('您没有权限查看任务');\n  }\n  return false;\n};\n\nconst ensureManagePermission = () => {\n  if (canManageTasks.value) {\n    return true;\n  }\n  ElMessage.warning('您没有权限管理任务');\n  return false;\n};\n\nconst ensureTriggerPermission = () => {\n  if (canTriggerTasks.value) {\n    return true;\n  }\n  ElMessage.warning('您没有权限触发任务');\n  return false;\n};\n\nconst requestTaskData = async () => {\n  if (!ensureReadPermission(false)) {\n    return;\n  }\n  try {\n    await store.dispatch('tasks/loadTaskList');\n  } catch (error) {\n    // errors handled via store state\n  }\n  try {\n    await store.dispatch('tasks/loadMetrics');\n  } catch (error) {\n    // errors handled via store state\n  }\n};\n\nconst startAutoRefresh = () => {\n  if (refreshTimer) {\n    return;\n  }\n  refreshTimer = window.setInterval(requestTaskData, 10000);\n};\n\nconst stopAutoRefresh = () => {\n  if (refreshTimer) {\n    window.clearInterval(refreshTimer);\n    refreshTimer = null;\n  }\n};\n\nconst applyQueryFilters = () => {\n  if (typeof route.query.keyword === 'string') {\n    filters.keyword = route.query.keyword;\n  }\n  if (typeof route.query.status === 'string') {\n    filters.status = route.query.status;\n  }\n  if (typeof route.query.owner === 'string') {\n    filters.owner = route.query.owner;\n  }\n  if (route.query.tags) {\n    if (Array.isArray(route.query.tags)) {\n      filters.tags = route.query.tags;\n    } else if (typeof route.query.tags === 'string') {\n      filters.tags = route.query.tags.split(',');\n    }\n  }\n};\n\nonMounted(() => {\n  applyQueryFilters();\n  stopPermissionWatcher = watch(\n    canReadTasks,\n    (allowed) => {\n      if (!allowed) {\n        stopAutoRefresh();\n        return;\n      }\n      handleSearch();\n      startAutoRefresh();\n    },\n    { immediate: true }\n  );\n});\n\nonBeforeUnmount(() => {\n  if (stopPermissionWatcher) {\n    stopPermissionWatcher();\n  }\n  stopAutoRefresh();\n});\n\nconst handleSearch = async () => {\n  if (!ensureReadPermission()) {\n    return;\n  }\n  await store.dispatch('tasks/setFilters', { ...filters });\n  try {\n    await store.dispatch('tasks/loadMetrics');\n  } catch (error) {\n    // errors handled via store state\n  }\n\n  const query = {\n    keyword: filters.keyword || undefined,\n    status: filters.status && filters.status !== 'ALL' ? filters.status : undefined,\n    owner: filters.owner || undefined,\n    tags: filters.tags.length ? filters.tags.join(',') : undefined\n  };\n  router.replace({ query: { ...route.query, ...query } });\n};\n\nconst changePage = async (page) => {\n  if (!ensureReadPermission(false)) {\n    return;\n  }\n  await store.dispatch('tasks/setPagination', { page });\n};\n\nconst changeSize = async (size) => {\n  if (!ensureReadPermission(false)) {\n    return;\n  }\n  await store.dispatch('tasks/setPagination', { size, page: 1 });\n};\n\nconst handleDrawerVisible = (visible) => {\n  drawerVisible.value = visible;\n  if (!visible) {\n    currentTaskForm.value = {};\n  }\n};\n\nconst openCreate = () => {\n  if (!ensureManagePermission()) {\n    return;\n  }\n  currentTaskForm.value = {};\n  drawerVisible.value = true;\n};\n\nconst editTask = (row) => {\n  if (!ensureManagePermission()) {\n    return;\n  }\n  currentTaskForm.value = { ...row };\n  drawerVisible.value = true;\n};\n\nconst submitTask = async (payload) => {\n  if (!ensureManagePermission()) {\n    return;\n  }\n  submitting.value = true;\n  try {\n    await store.dispatch('tasks/submitTask', payload);\n    drawerVisible.value = false;\n    currentTaskForm.value = {};\n    handleSearch();\n  } finally {\n    submitting.value = false;\n  }\n};\n\nconst toggleTask = async (row) => {\n  if (!ensureManagePermission()) {\n    return;\n  }\n  await store.dispatch('tasks/changeTaskStatus', { taskId: row.id, enabled: !row.enabled });\n  handleSearch();\n};\n\nconst removeTask = async (row) => {\n  if (!ensureManagePermission()) {\n    return;\n  }\n  await store.dispatch('tasks/removeTask', row.id);\n  handleSearch();\n};\n\nconst triggerTask = async (row) => {\n  if (!ensureTriggerPermission()) {\n    return;\n  }\n  await store.dispatch('tasks/triggerTask', { taskId: row.id, payload: {} });\n  ElMessage.success('任务执行已请求');\n};\n\nconst openExecution = async (row) => {\n  if (!ensureReadPermission()) {\n    return;\n  }\n  await store.dispatch('tasks/loadTaskExecutions', { taskId: row.id });\n  currentTask.value = row;\n  executionVisible.value = true;\n};\n\nconst handleExecutionPage = async (page) => {\n  if (!ensureReadPermission(false) || !currentTask.value) {\n    return;\n  }\n  await store.dispatch('tasks/loadTaskExecutions', {\n    taskId: currentTask.value.id,\n    page,\n    size: executionPagination.value.size\n  });\n};\n\nconst openDetail = (row) => {\n  if (!ensureReadPermission()) {\n    return;\n  }\n  router.push(`/tasks/${row.id}`);\n};\n\nconst viewLog = (record) => {\n  if (!ensureReadPermission()) {\n    return;\n  }\n  router.push({\n    path: `/tasks/${currentTask.value?.id}`,\n    query: { recordId: record.id }\n  });\n};\n\nconst openCronHelper = () => {\n  router.push({ path: '/config', query: { tab: 'cron-tool' } });\n};\n\nconst exportTasks = () => {\n  if (!ensureReadPermission()) {\n    return;\n  }\n  window.open('/api/tasks/export');\n};\n\nconst formatType = (type) => {\n  const map = {\n    CRON: 'Cron定时',\n    ONE_TIME: '一次性',\n    FIXED_RATE: '固定频率'\n  };\n  return map[type] || type;\n};\n\nconst getOwnerInitials = (owner) => {\n  if (!owner) {\n    return 'NA';\n  }\n  return owner.slice(0, 2).toUpperCase();\n};\n</script>\n\n<style scoped lang=\"scss\">\n.task-center {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n\n  &__alert {\n    margin-bottom: 12px;\n  }\n\n  &__toolbar {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 20px;\n\n    .toolbar__left {\n      flex: 1;\n    }\n\n    .toolbar__right {\n      display: flex;\n      gap: 12px;\n    }\n  }\n\n  &__error {\n    padding: 32px 0;\n  }\n\n  &__content {\n    .task-name {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n\n      &__tag {\n        background: rgba(34, 211, 238, 0.1);\n        color: #0891b2;\n      }\n    }\n\n    .task-meta {\n      display: flex;\n      gap: 16px;\n      font-size: 12px;\n      color: #64748b;\n      margin-top: 4px;\n    }\n  }\n\n  &__pagination {\n    display: flex;\n    justify-content: flex-end;\n    padding-top: 16px;\n  }\n\n  &__empty {\n    display: flex;\n    justify-content: center;\n    padding: 48px 0;\n  }\n}\n\n.owner-avatar {\n  background-color: #0891b2;\n  color: #fff;\n  margin-right: 8px;\n}\n</style>\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}