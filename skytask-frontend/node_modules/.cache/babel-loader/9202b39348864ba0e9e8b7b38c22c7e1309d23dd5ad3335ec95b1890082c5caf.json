{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  ref: \"chartRef\",\n  class: \"base-chart\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, null, 512 /* NEED_PATCH */);\n}","map":{"version":3,"names":["ref","class","_createElementBlock","_hoisted_1"],"sources":["D:\\桌面\\项目\\分布式任务调度系统\\SkyTask\\skytask-frontend\\src\\components\\charts\\BaseChart.vue"],"sourcesContent":["<template>\n  <div ref=\"chartRef\" class=\"base-chart\"></div>\n</template>\n\n<script setup>\nimport { onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport * as echarts from 'echarts';\n\nconst props = defineProps({\n  options: {\n    type: Object,\n    required: true\n  },\n  theme: {\n    type: [String, Object],\n    default: null\n  },\n  autoResize: {\n    type: Boolean,\n    default: true\n  }\n});\n\nconst chartRef = ref(null);\nlet chartInstance = null;\n\nconst renderChart = (opts) => {\n  if (!chartRef.value) {\n    return;\n  }\n  if (!chartInstance) {\n    chartInstance = echarts.init(chartRef.value, props.theme || undefined);\n  }\n  if (opts) {\n    chartInstance.setOption(opts, true);\n  }\n};\n\nconst resizeChart = () => {\n  if (chartInstance) {\n    chartInstance.resize();\n  }\n};\n\nonMounted(() => {\n  renderChart(props.options);\n  if (props.autoResize) {\n    window.addEventListener('resize', resizeChart);\n  }\n});\n\nwatch(\n  () => props.options,\n  (opts) => {\n    renderChart(opts);\n  },\n  { deep: true }\n);\n\nonBeforeUnmount(() => {\n  if (props.autoResize) {\n    window.removeEventListener('resize', resizeChart);\n  }\n  if (chartInstance) {\n    chartInstance.dispose();\n    chartInstance = null;\n  }\n});\n\ndefineExpose({\n  resize: resizeChart,\n  getInstance: () => chartInstance\n});\n</script>\n\n<style scoped>\n.base-chart {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"],"mappings":";;EACOA,GAAG,EAAC,UAAU;EAACC,KAAK,EAAC;;;uBAA1BC,mBAAA,CAA6C,OAA7CC,UAA6C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}