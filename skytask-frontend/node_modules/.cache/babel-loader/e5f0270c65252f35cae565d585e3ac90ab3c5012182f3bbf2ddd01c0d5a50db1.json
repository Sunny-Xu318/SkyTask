{"ast":null,"code":"import { onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport * as echarts from 'echarts';\nexport default {\n  __name: 'BaseChart',\n  props: {\n    options: {\n      type: Object,\n      required: true\n    },\n    theme: {\n      type: [String, Object],\n      default: null\n    },\n    autoResize: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    const props = __props;\n    const chartRef = ref(null);\n    let chartInstance = null;\n    const renderChart = opts => {\n      if (!chartRef.value) {\n        return;\n      }\n      if (!chartInstance) {\n        chartInstance = echarts.init(chartRef.value, props.theme || undefined);\n      }\n      if (opts) {\n        chartInstance.setOption(opts, true);\n      }\n    };\n    const resizeChart = () => {\n      if (chartInstance) {\n        chartInstance.resize();\n      }\n    };\n    onMounted(() => {\n      renderChart(props.options);\n      if (props.autoResize) {\n        window.addEventListener('resize', resizeChart);\n      }\n    });\n    watch(() => props.options, opts => {\n      renderChart(opts);\n    }, {\n      deep: true\n    });\n    onBeforeUnmount(() => {\n      if (props.autoResize) {\n        window.removeEventListener('resize', resizeChart);\n      }\n      if (chartInstance) {\n        chartInstance.dispose();\n        chartInstance = null;\n      }\n    });\n    __expose({\n      resize: resizeChart,\n      getInstance: () => chartInstance\n    });\n    const __returned__ = {\n      props,\n      chartRef,\n      get chartInstance() {\n        return chartInstance;\n      },\n      set chartInstance(v) {\n        chartInstance = v;\n      },\n      renderChart,\n      resizeChart,\n      onBeforeUnmount,\n      onMounted,\n      ref,\n      watch,\n      get echarts() {\n        return echarts;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onBeforeUnmount","onMounted","ref","watch","echarts","props","__props","chartRef","chartInstance","renderChart","opts","value","init","theme","undefined","setOption","resizeChart","resize","options","autoResize","window","addEventListener","deep","removeEventListener","dispose","__expose","getInstance"],"sources":["D:/桌面/项目/分布式任务调度系统/SkyTask-main/SkyTask-main/skytask-frontend/src/components/charts/BaseChart.vue"],"sourcesContent":["<template>\n  <div ref=\"chartRef\" class=\"base-chart\"></div>\n</template>\n\n<script setup>\nimport { onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport * as echarts from 'echarts';\n\nconst props = defineProps({\n  options: {\n    type: Object,\n    required: true\n  },\n  theme: {\n    type: [String, Object],\n    default: null\n  },\n  autoResize: {\n    type: Boolean,\n    default: true\n  }\n});\n\nconst chartRef = ref(null);\nlet chartInstance = null;\n\nconst renderChart = (opts) => {\n  if (!chartRef.value) {\n    return;\n  }\n  if (!chartInstance) {\n    chartInstance = echarts.init(chartRef.value, props.theme || undefined);\n  }\n  if (opts) {\n    chartInstance.setOption(opts, true);\n  }\n};\n\nconst resizeChart = () => {\n  if (chartInstance) {\n    chartInstance.resize();\n  }\n};\n\nonMounted(() => {\n  renderChart(props.options);\n  if (props.autoResize) {\n    window.addEventListener('resize', resizeChart);\n  }\n});\n\nwatch(\n  () => props.options,\n  (opts) => {\n    renderChart(opts);\n  },\n  { deep: true }\n);\n\nonBeforeUnmount(() => {\n  if (props.autoResize) {\n    window.removeEventListener('resize', resizeChart);\n  }\n  if (chartInstance) {\n    chartInstance.dispose();\n    chartInstance = null;\n  }\n});\n\ndefineExpose({\n  resize: resizeChart,\n  getInstance: () => chartInstance\n});\n</script>\n\n<style scoped>\n.base-chart {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"],"mappings":"AAKA,SAASA,eAAe,EAAEC,SAAS,EAAEC,GAAG,EAAEC,KAAK,QAAQ,KAAK;AAC5D,OAAO,KAAKC,OAAO,MAAM,SAAS;;;;;;;;;;;;;;;;;;;;IAElC,MAAMC,KAAK,GAAGC,OAaZ;IAEF,MAAMC,QAAQ,GAAGL,GAAG,CAAC,IAAI,CAAC;IAC1B,IAAIM,aAAa,GAAG,IAAI;IAExB,MAAMC,WAAW,GAAIC,IAAI,IAAK;MAC5B,IAAI,CAACH,QAAQ,CAACI,KAAK,EAAE;QACnB;MACF;MACA,IAAI,CAACH,aAAa,EAAE;QAClBA,aAAa,GAAGJ,OAAO,CAACQ,IAAI,CAACL,QAAQ,CAACI,KAAK,EAAEN,KAAK,CAACQ,KAAK,IAAIC,SAAS,CAAC;MACxE;MACA,IAAIJ,IAAI,EAAE;QACRF,aAAa,CAACO,SAAS,CAACL,IAAI,EAAE,IAAI,CAAC;MACrC;IACF,CAAC;IAED,MAAMM,WAAW,GAAGA,CAAA,KAAM;MACxB,IAAIR,aAAa,EAAE;QACjBA,aAAa,CAACS,MAAM,CAAC,CAAC;MACxB;IACF,CAAC;IAEDhB,SAAS,CAAC,MAAM;MACdQ,WAAW,CAACJ,KAAK,CAACa,OAAO,CAAC;MAC1B,IAAIb,KAAK,CAACc,UAAU,EAAE;QACpBC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEL,WAAW,CAAC;MAChD;IACF,CAAC,CAAC;IAEFb,KAAK,CACH,MAAME,KAAK,CAACa,OAAO,EAClBR,IAAI,IAAK;MACRD,WAAW,CAACC,IAAI,CAAC;IACnB,CAAC,EACD;MAAEY,IAAI,EAAE;IAAK,CACf,CAAC;IAEDtB,eAAe,CAAC,MAAM;MACpB,IAAIK,KAAK,CAACc,UAAU,EAAE;QACpBC,MAAM,CAACG,mBAAmB,CAAC,QAAQ,EAAEP,WAAW,CAAC;MACnD;MACA,IAAIR,aAAa,EAAE;QACjBA,aAAa,CAACgB,OAAO,CAAC,CAAC;QACvBhB,aAAa,GAAG,IAAI;MACtB;IACF,CAAC,CAAC;IAEFiB,QAAY,CAAC;MACXR,MAAM,EAAED,WAAW;MACnBU,WAAW,EAAEA,CAAA,KAAMlB;IACrB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}